=== 3D ThermoElectric Model
:toc: macro
include::{partialsdir}/header-macros.adoc[]
include::{partialsdir}/header-uri.adoc[]
include::{partialsdir}/mso4sc-uri.adoc[]

Use *MagTherm* this app to run simulations of High Field Magnets for:

* ThermoElectric

==== To test the app

To check the app, just change the following values:

* ThermoElectric

[options="header,footer"]
|===
| Key         | Value                                                            
| *cfgfile*   | `/usr/share/doc/hifimagnet/ThermoElectricModel/quarter-turn3D.cfg` 
|===


==== Prepare your simulation

* provide appropiate configuration, model and materials (see <<here, >> for details)
* create an tar gzipped archive of these files
* upload the data on CKAN  (see <<here, >> for details)

==== Set up the simulation in *Experiments*:
 
[options="header,footer"]
|===
| Key                           | Default                                                            | Notes
| *Dataset resource: input_url* | URL pointing to an archive of data files (comes from the data Catalog) | 
| *Dataset resource: model*     |                                                                    | dataset mode from the data Catalog
| *cfgfile*                     | `quarter-turn3D.cfg`                                               | cfg file need to be in the dataset
| *Output dataset: outputs_at*  |                                                                    | Data Catalog where outpus will be uploaded
|===


==== Examples and Benchmarks

[NOTE]
====
Use a modified verion of the canary {mso4sc} hpc-plugin:
https://raw.githubusercontent.com/Trophime/cloudify-hpc-plugin/add_checks/plugin.yaml
====

[options="header,footer"]
|===
| Testcase          | DataSet	                   | HPC settings (partition, ...)                     | Notes
| *quarter-turn*    | `thermoelec-test`            | lncmi: `stokes`                                   |
|                   |                              | cesga: `thinnodes`                                |
| *HL*              | `hl-test`                    | lncmi: `stokes`,`n=32`                            | HL-31_H1_boomeramg_p32.cfg
|                   |                              | cesga: `thinnodes`,`32`                           |
|===


